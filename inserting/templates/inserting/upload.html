{% load static %}
{% load i18n %}
{% get_current_language as LANGUAGE_CODE %}
{% get_current_language_bidi as LANGUAGE_BIDI %}
<!doctype html>
<html lang="{{ LANGUAGE_CODE }}" dir="{% if LANGUAGE_BIDI %}rtl{% else %}ltr{% endif %}">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>{% translate "هاتف: تشخیص جعل عمیق" %}</title>
	<link rel="icon" href="{% static 'users/img/favicon.png' %}" type=”image/x-icon”>
	{% if LANGUAGE_BIDI %}
	<link href="{% static 'users/bootstrap.rtl.min.css' %}" rel="stylesheet" crossorigin="anonymous">
	{% else %}
	<link href="{% static 'users/bootstrap.min.css' %}" rel="stylesheet" crossorigin="anonymous">
	{% endif %}
	<link href="{% static 'users/font/Vazirmatn-Variable-font-face.css' %}" rel="stylesheet" crossorigin="anonymous">
	<link href="{% static 'inserting/css/upload.css' %}" rel="stylesheet" crossorigin="anonymous">
</head>

<body class="bg-dark text-light">
	<nav class="navbar navbar-dark navbar-expand-md bg-transparent">
		<div class="container-fluid px-3 px-lg-5 pt-3">
			<a class="navbar-brand active text-emphasis me-5" href="/">
				<svg fill="#00FCDB" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M206.883 245.128C171.01 255.628 146.887 286.379 149.386 319.254C160.761 306.504 178.134 295.504 199.258 288.379L206.883 245.128ZM95.765 295.004L64.142 115.502C63.767 113.876 64.392 112.876 64.392 112.876C122.138 80.751 187.509 63.876 253.379 63.876C255.004 63.876 256.504 64.001 258.129 64.001C272.128 50.501 289.877 41.251 309.751 38C328.624 35 347.873 33.5 366.997 32.75C356.998 18.75 342.499 8.5 325.125 5.75C301.251 1.875 277.253 0 253.379 0C176.635 0 101.015 19.375 33.269 57.001C9.021 70.501 -3.853 98.501 1.021 126.627L32.769 306.129C47.018 386.63 169.135 448.131 237.256 448.131C240.88 448.131 244.005 447.756 247.255 447.381C233.756 430.256 218.257 406.88 207.757 379.755C160.136 366.755 101.64 328.129 95.765 295.004ZM193.383 157.502C192.633 153.377 191.134 149.627 189.259 146.127C181.009 155.002 168.635 161.877 154.011 164.502C139.387 167.002 125.263 164.877 114.514 159.252C114.014 163.252 113.889 167.252 114.639 171.377C118.388 193.128 139.137 207.628 160.886 203.753C182.634 200.003 197.258 179.252 193.383 157.502ZM606.731 120.877C517.862 71.501 415.369 53.501 314.875 69.501C287.502 73.876 265.754 95.751 260.754 123.877L229.006 303.379C213.632 390.505 324.375 499.757 387.371 510.757C450.366 521.882 591.857 457.006 607.231 369.88L638.979 190.377C643.853 162.252 630.979 134.252 606.731 120.877ZM333.499 217.753C337.374 196.003 358.122 181.502 379.871 185.377C401.62 189.127 416.119 209.878 412.369 231.503C411.619 235.628 410.119 239.378 408.244 243.003C399.995 234.003 387.62 227.253 372.996 224.628C358.247 222.003 344.248 224.253 333.499 229.753C332.999 225.878 332.874 221.878 333.499 217.753ZM403.994 416.505C348.373 406.63 310.501 357.255 315 303.504C335.624 329.129 371.247 349.755 414.494 357.38C457.741 365.005 498.238 357.755 526.361 340.754C512.237 392.63 459.741 426.256 403.994 416.505ZM534.361 265.128C526.111 256.253 513.612 249.378 498.988 246.753C484.364 244.253 470.365 246.378 459.491 252.003C458.991 248.003 458.866 244.003 459.616 239.878C463.49 218.128 484.239 203.628 505.988 207.503C527.736 211.378 542.235 232.003 538.36 253.753C537.61 257.878 536.111 261.628 534.361 265.128Z" /></svg>
				<b>{% translate "هاتف" %}</b>
			</a>
			<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
				aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarSupportedContent">
				<ul class="navbar-nav me-auto mb-2 mb-lg-0">
					<li class="nav-item ms-5">
						<a class="nav-link" aria-current="page" href="{% url 'demo' %}">{% translate "نمایش دمو" %}</a>
					</li>
					<li class="nav-item ms-5">
						<a class="nav-link" href="#">{% translate "درباره ما" %}</a>
					</li>
					<li class="nav-item ms-5">
						<a class="nav-link" href="#">{% translate "تماس با ما" %}</a>
					</li>
				</ul>
				<form id="langForm" action="{% url 'set_language' %}" method="post">{% csrf_token %}
					<input name="language" type="hidden" id="langInput">
					<div class="dropdown">
						{% get_available_languages as LANGUAGES %}
						{% get_language_info_list for LANGUAGES as languages %}
						<button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown"
							aria-expanded="false">
							{{ LANGUAGE_CODE|language_name_local }} ({{ LANGUAGE_CODE }})
						</button>
						<ul class="dropdown-menu bg-secondary text-light">
							{% for language in languages %}
							{% if language.code != LANGUAGE_CODE %}
							<li>
								<button class="dropdown-item bg-secondary text-light" onclick="setLang('{{ language.code }}')">{{language.name_local }} ({{ language.code }})</button>
							</li>
							{% endif %}
							{% endfor %}
						</ul>
					</div>
				</form>
				<a href="{% url 'profile' %}" class="btn btn-outline-secondary ms-3" type="submit">
					{% translate "حساب کاربری" %}
				</a>
			</div>
		</div>
	</nav>
	<div class="container mt-5 text-center">
		<div class="row row-cols-1 row-cols-md-2 mb-5 pb-5 mt-2 pt-2 mt-md-5 pt-md-5 justify-content-center">
			<div class="col">
				<ul class="nav nav-pills nav-fill border border-5 border-secondary rounded rounded-5 bg-secondary mb-5">
					<li class="nav-item" role="presentation">
						<button class="rounded rounded-5 {% if img %}text-light{% else %}bg-light text-dark active{% endif %} nav-link" id="vid-tab" data-bs-toggle="tab"
							data-bs-target="#vid-tab-pane" type="button" role="tab" aria-controls="vid-tab-pane"
							aria-selected="true" onclick="changeTab(true)">
							<b>{% translate "آپلود ویدئو" %}</b>
						</button>
					</li>
					<li class="nav-item" role="presentation">
						<button class="rounded rounded-5 {% if img %}bg-light text-dark active{% else %}text-light{% endif %} nav-link" id="img-tab" data-bs-toggle="tab"
							data-bs-target="#img-tab-pane" type="button" role="tab" aria-controls="img-tab-pane"
							aria-selected="false" onclick="changeTab(false)">
							<b>{% translate "آپلود تصویر" %}</b>
						</button>
					</li>
				</ul>
				<form action="?" method="post" enctype="multipart/form-data" id="vid-form" class="mb-5 mt-3 {% if img %}d-none{% endif %}">
					{% csrf_token %}
					<div class="form-floating mb-3">
						{{ vid_form.title }}
						<label class="text-dark" for="{{ vid_form.title.id_for_label }}">{% translate "عنوان ویدئو" %}</label>
					</div>
					<div class="text-start text-danger">
						{{ vid_form.title.errors }}
					</div>
					<div class="input-group mb-3">
						{{ vid_form.file }}
						<label class="input-group-text" for="{{ vid_form.file.id_for_label }}">{% translate "آپلود فایل" %}</label>
					</div>
					<div class="text-start text-danger">
						{{ vid_form.file.errors }}
					</div>
					<button type="submit" class="btn btn-primary w-100 mt-4 mb-3 py-2">{% translate "بررسی ویدئو" %}</button>
					<div class="text-danger">
						{{ vid_form.non_field_errors }}
					</div>
				</form>
				<form action="?img" method="post" enctype="multipart/form-data" id="img-form" class="mb-5 mt-3 {% if not img %}d-none{% endif %}">
					{% csrf_token %}
					<div class="form-floating mb-3">
						{{ img_form.title }}
						<label class="text-dark" for="{{ img_form.title.id_for_label }}">{% translate "عنوان تصویر" %}</label>
					</div>
					<div class="text-start text-danger">
						{{ img_form.title.errors }}
					</div>
					<div class="input-group mb-3">
						{{ img_form.file }}
						<label class="input-group-text" for="{{ img_form.file.id_for_label }}">{% translate "آپلود فایل" %}</label>
					</div>
					<div class="text-start text-danger">
						{{ img_form.file.errors }}
					</div>
					<button type="submit" class="btn btn-primary w-100 mt-4 mb-3 py-2">{% translate "بررسی تصویر" %}</button>
					<div class="text-danger">
						{{ img_form.non_field_errors }}
					</div>
				</form>
			</div>
			<div class="col">
				{% if result %}
				<h1>{% translate "نتیجه بررسی" %}</h1>
				{% if img %}
				<img width="75%" height="75%" src="{{ file_path }}" alt="uploaded image" class="mb-3">
				{% else %}
				<video width="75%" height="75%" controls>
					<source src="{{ file_path }}" type="video/mp4">
					{% translate "مرورگر شما از پخش ویدئو پشتیبانی نمی‌کند." %}
				</video>
				{% endif %}
				<h2>{% translate "میزان جعلی بودن:" %} <span class="prim">{{ result }}</span></h2>
				{% endif %}
			</div>
		</div>
	</div>
	<script src="{% static 'users/bootstrap.bundle.min.js' %}" crossorigin="anonymous"></script>
	<script src="{% static 'users/js/setLang.js' %}" crossorigin="anonymous"></script>
	<script src="{% static 'inserting/js/upload.js' %}" crossorigin="anonymous"></script>
</body>

</html>
